# aiti-guru
Repository with a test assignment for the "Aiti Guru" company

To initiate you need to:
1. Create enviroments:
    PSQL_USER
    PSQL_PASSWORD

You also can to add your test data into db/01_init.sql or add copy of your file to dockerfile copy directive

2. `docker-compose up -d --build`


Task text:
 
1. Спроектировать схему БД.

Модель данных реляционная.
Сущности
1.1. Номенклатура (наименование, кол-во, цена)

1.2. Каталог номенклатуры/Дерево категорий.
Необходимо хранить данные о категориях товара, при этом сами категории могут иметь неограниченный уровень вложенности
Схема данных категорий номенклатуры должна безболезненно позволять добавлять категории любого уровня вложенности. На этапе проектирования максимальный уровень вложенности неизвестен.

1.3. Клиенты (наименование, адрес)

1.4. Заказы покупателей. Необходимо предусмотреть возможность делать заказ из разного набора товаров.
Продумать схему БД, бизнес логику описывать не требуется.

2. Написать следующие SQL запросы:

2.1. Получение информации о сумме товаров заказанных под каждого клиента (Наименование клиента, сумма)

2.2. Найти количество дочерних элементов первого уровня вложенности для категорий номенклатуры.

2.3.

2.3.1. Написать текст запроса для отчета (view) «Топ-5 самых покупаемых товаров за последний месяц» (по количеству штук в заказах). В отчете должны быть:
Наименование товара, Категория 1-го уровня, Общее количество проданных штук.

2.3.2. Проанализировать написанный в п. 2.3.1 запрос и структуру БД. Предложить варианты оптимизации этого запроса и общей схемы данных для повышения производительности системы в условиях роста данных (тысячи заказов в день).

3. Написать сервис «Добавление товара в заказ» который работает по REST-API. Метод должен принимать ID заказа, ID номенклатуры и количество. Если товар уже есть в заказе, его количество должно увеличиваться, а не создаваться новая позиция. Если товара нет в наличии то должна возвращаться соответствующая ошибка. Стек -  любой фреймворк в пределах Python. Git репозиторий, контейнеризация, документация, и прочее — приветствуется.

Результатом выполнения задания должна быть даталогическая схема данных, SQL запросы по пункту 2 и сервис по пункту 3.
